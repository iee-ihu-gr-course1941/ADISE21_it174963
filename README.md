# ADISE21_it174963
GAME :  🃏 Μουτζούρης 🃏

Table of Contents
=================
   * [Εγκατάσταση](#εγκατάσταση)
      * [Απαιτήσεις](#απαιτήσεις)
      * [Οδηγίες Εγκατάστασης](#οδηγίες-εγκατάστασης)
   * [Περιγραφή API](#περιγραφή-api)
      * [Methods](#methods)
         * [RESET ALL](#RESET ALL)
         * [REFRESH ALL in_game](#REFRESH ALL in_game)
         * [ΕΠΙΣΤΡΟΦΗ status](#ΕΠΙΣΤΡΟΦΗ status)
         * [ΕΝΗΜΕΡΩΣΗ ΠΙΝΑΚΑ game_status](#ΕΝΗΜΕΡΩΣΗ ΠΙΝΑΚΑ game_status)
         * [ΕΙΣΑΓΩΓΗ DATA ΣΤON ΠΙΝΑΚA players](#ΕΙΣΑΓΩΓΗ DATA ΣΤON ΠΙΝΑΚA players)
         * [ΕΙΣΑΓΩΓΗ DATA ΣΤΟΥΣ ΠΙΝΑΚΕΣ board_1 , board_2](#ΕΙΣΑΓΩΓΗ DATA ΣΤΟΥΣ ΠΙΝΑΚΕΣ board_1 , board_2)
         * [ΑΦΑΙΡΕΣΗ ΖΕΥΓΑΡΙΩΝ ΑΠΟ ΤΟΥΣ ΠΙΝΑΚΕΣ board_1 , board_2](#ΑΦΑΙΡΕΣΗ ΖΕΥΓΑΡΙΩΝ ΑΠΟ ΤΟΥΣ ΠΙΝΑΚΕΣ board_1 , board_2)
         * [ΜΕΤΑΦΟΡΑ ΚΑΙ ΔΙΑΓΡΑΦΗ ΓΙΑ ΤΙΣ ΚΑΡΤΕΣ ¨Κ¨ ΣΤΟΥΣ ΠΙΝΑΚΕΣ board_1 , board_2](#ΜΕΤΑΦΟΡΑ ΚΑΙ ΔΙΑΓΡΑΦΗ ΓΙΑ ΤΙΣ ΚΑΡΤΕΣ ¨Κ¨ ΣΤΟΥΣ ΠΙΝΑΚΕΣ board_1 , board_2)
      * [Entities](#entities)
         * [Board](#board-1)
         * [Players](#players)
         * [Game_status](#game_status)


# Demo Page

Μπορείτε να κατεβάσετε τοπικά ή να επισκευτείτε την σελίδα (ανοίγωντας 2 παράθυρα browser, ένα για τον κάθε παίχτη): 
https://users.iee.ihu.gr/~it174963/ADISE21_it174963/Main.php



# Εγκατάσταση

## Απαιτήσεις

* Apache2
* Mysql Server
* php

## Οδηγίες Εγκατάστασης

 * Κάντε clone το project σε κάποιον φάκελο <br/>
  `$ git clone https://github.com/iee-ihu-gr-course1941/ADISE21_it174963.git`

* Βεβαιωθείτε ότι ο φάκελος είναι προσβάσιμος από τον Apache Server. πιθανόν να χρειαστεί να καθορίσετε τις παρακάτω ρυθμίσεις.

 * Θα πρέπει να δημιουργήσετε στην Mysql την βάση με όνομα 'adise21' και να φορτώσετε σε αυτήν την βάση τα δεδομένα από το αρχείο schema.sql

 * Θα πρέπει να φτιάξετε το αρχείο lib/config_local.php το οποίο να περιέχει:
```
    <?php
	$DB_PASS = 'κωδικός';
	$DB_USER = 'όνομα χρήστη';
    ?>
```

# Περιγραφή Παιχνιδιού

Στόχος : Ο στόχος του παιχνιδιού είναι να μείνεις χωρίς φύλλα στο χέρι. Αυτός που θα μείνει με ένα φύλλο είναι ο χαμένος.

Διαδικασία παιχνιδιού : Ο πρώτος παίχτης τραβάει ένα φύλλο από αυτόν που κάθετε απέναντί του, αν κάνει ζευγάρι το νέο χαρτί με κάποια από τα δικά του τότε τα ρίχνει, αλλιώς τα κρατάει και συνεχίζει ο αντίπαλος. Όποιος ζευγαρώσει όλα τα φύλλα του βγαίνει από το παιχνίδι. Όποιος μείνει τελευταίος με τον Ρήγα Μπαστούνι (τον Μουτζούρη) στο χέρι του είναι ο χαμένος, και οι υπόλοιποι παίχτες αποφασίζουν την ποινή του. 

Η βάση μας κρατάει τους εξής πίνακες και στοιχεία:
  🠺'board_1' , όπου βρίσκονται όλες οι καταχωρημένες κάρτες για τον 1ο παίκτη.
  
  🠺'board_2' , όπου βρίσκονται όλες οι καταχωρημένες κάρτες για τον 2ο παίκτη.
  
  🠺'board_empty' , ένας κενός πίνακας που χρησιμοποιούμε για πιο εύκολο reset των board_1 , board_2.
  
  🠺'game_status' , όπυ βρίσκονται πληροφοροίες για το status του παιχνιδιού,καθώς και το ποιός παίζει αλλά και το αποτέλεσμα της παρτίδας παιχνιδιού.
  
  🠺'players' , όπου βρίσκονται όλες οι καταχωρημένες πληροφορίες για τους 2 παίκτες του παιχνιδιού.

Η εφαρμογή απαπτύχθηκε μέχρι το σημείο ,όπου 2 άτομα μπορούν πολύ εύκολα να παίξουν μια παρτίδα.

## Συντελεστές

Αρμοδιότητες ομάδας.

Προγραμματιστής 1 (Σπύρος Δομενικιώτης):  Σχεδιασμός mysql , PHP API , Jquery



# Περιγραφή API

## Methods


### RESET ALL

```
POST /reset/
```

Κάνει reset τους πίνακες
 🠺[board_1](#board_1)
 🠺[board_2](#board_2)
 🠺[players](#players)
 🠺[game_status](#game_status)

### REFRESH ALL in_game

```
GET /refresh/
```

Επιστρέφει τα δεδομένα των εξής πινάκων
 🠺[board_1](#board_1)
 🠺[board_2](#board_2)
 🠺[players](#players)

### ΕΠΙΣΤΡΟΦΗ status

```
GET /status/
```

Επιστρέφει τα δεδομένα του πίνακα [game_status](#game_status) και ελέγχει εάν κάποιος παίκτης έχει αποχωρήσει.

### ΕΝΗΜΕΡΩΣΗ ΠΙΝΑΚΑ game_status

```
POST /status_change_turn/
```
Ενημερώνει τα δεδομένα του πίνακα [game_status](#game_status) και πιο συγκεκριμένα την σειρά του παίκτη, το status του παιχνιδιού ,αλλά και το πιθανό αποτέλεσμα.


### ΕΙΣΑΓΩΓΗ DATA ΣΤON ΠΙΝΑΚA players
```
POST /players/
```

Ενημερώνει τα δεδομένα των πινάκων [players](#players) με τα δεδομένα που βρέθηκαν από το σύστημα.
 

### ΕΙΣΑΓΩΓΗ DATA ΣΤΟΥΣ ΠΙΝΑΚΕΣ board_1 , board_2
```
POST /cards/
```

Ενημερώνει τα δεδομένα των πινάκων
 🠺[board_1](#board_1)
 🠺[board_2](#board_2)
 με τα δεδομένα που βρέθηκαν από το σύστημα.
 
 
### ΑΦΑΙΡΕΣΗ ΖΕΥΓΑΡΙΩΝ ΑΠΟ ΤΟΥΣ ΠΙΝΑΚΕΣ board_1 , board_2
```
POST /cards_delete/
```
Διαγράφει τα δεδομένα ,που αντιστοιχούν στις κάρτες που βρέθηκαν ως ζευγάρι, από τους πίνακες
 🠺[board_1](#board_1)
 🠺[board_2](#board_2).

### ΜΕΤΑΦΟΡΑ ΚΑΙ ΔΙΑΓΡΑΦΗ ΓΙΑ ΤΙΣ ΚΑΡΤΕΣ ¨Κ¨ ΣΤΟΥΣ ΠΙΝΑΚΕΣ board_1 , board_2
```
POST /cards_move_K/
```
Μεταφέρει τα δεδομένα της κάρτας "Κ" , που τυχαία επέλεξε ο παίκτης, στον πίνακα που του αντιστοιχεί και διαγράφει την εγγραφή της κάρτας απο τον πίνακα που την επέλεξε (αφετηρία κάρτας "Κ").

-------------------------------------------------------------------------------
#### Καθορισμός στοιχείων παίκτη
```
PUT /players/:p
```
Json Data:

| Field             | Description                 | Required   |
| ----------------- | --------------------------- | ---------- |
| `username`        | Το username για τον παίκτη p. | yes        |
| `color`           | To χρώμα που επέλεξε ο παίκτης p. | yes        |


Επιστρέφει τα στοιχεία του παίκτη p και ένα token. Το token πρέπει να το χρησιμοποιεί ο παίκτης καθόλη τη διάρκεια του παιχνιδιού.

### Status

#### Ανάγνωση κατάστασης παιχνιδιού
```
GET /status/
```

Επιστρέφει το στοιχείο [Game_status](#Game_status).



## Entities


### Board
---------

Το board είναι ένας πίνακας, ο οποίος στο κάθε στοιχείο έχει τα παρακάτω:


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `x`                      | H συντεταγμένη x του τετραγώνου              | 1..8                                |
| `y`                      | H συντεταγμένη y του τετραγώνου              | 1..8                                |
| `b_color`                | To χρώμα του τετραγώνου                      | 'B','W'                             |
| `piece_color`            | To χρώμα του πιονιού                         | 'B','W', null                       |
| `piece`                  | To Πιόνι που υπάρχει στο τετράγωνο           | 'K','Q','R','B','N','P', null       |
| `moves`                  | Πίνακας με τα δυνατά τετράγωνα (x,y) που μπορεί να μετακινηθεί το τρέχον πιόνι. Αν δεν υπάρχει πιόνι, ή δεν έχει κάνει login ο χρήστης, ή δεν έχει ξεκινήσει το παιχνίδι ή αν δεν υπάρχουν κινήσεις, τότε το πεδίο δεν υπάρχει. |   |


### Players
---------

O κάθε παίκτης έχει τα παρακάτω στοιχεία:


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `username`               | Όνομα παίκτη                                 | String                              |
| `piece_color`            | To χρώμα που παίζει ο παίκτης                | 'B','W'                             |
| `token  `                | To κρυφό token του παίκτη. Επιστρέφεται μόνο τη στιγμή της εισόδου του παίκτη στο παιχνίδι | HEX |


### Game_status
---------

H κατάσταση παιχνιδιού έχει τα παρακάτω στοιχεία:


| Attribute                | Description                                  | Values                              |
| ------------------------ | -------------------------------------------- | ----------------------------------- |
| `status  `               | Κατάσταση             | 'not active', 'initialized', 'started', 'ended', 'aborded'     |
| `p_turn`                 | To χρώμα του παίκτη που παίζει        | 'B','W',null                              |
| `result`                 |  To χρώμα του παίκτη που κέρδισε |'B','W',null                              |
| `last_change`            | Τελευταία αλλαγή/ενέργεια στην κατάσταση του παιχνιδιού         | timestamp |
